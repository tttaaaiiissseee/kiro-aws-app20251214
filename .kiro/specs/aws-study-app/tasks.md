# 実装計画

- [x] 1. プロジェクト構造とコア設定の初期化
  - Docker Compose設定でフロントエンド・バックエンド・データベースコンテナを定義
  - TypeScript設定とESLint/Prettierの設定
  - Prismaスキーマの初期設定とデータベース接続
  - _要件: 7.1, 7.2, 7.3_

- [x] 2. データベーススキーマとモデルの実装
  - [x] 2.1 Prismaスキーマの完全実装
    - Category、Service、Memo、Relationモデルの定義
    - 列挙型（MemoType、RelationType）の定義
    - リレーションシップと制約の設定
    - _要件: 1.1, 2.1, 3.1, 4.1_

  - [ ]* 2.2 サービス作成の完全性プロパティテスト
    - **プロパティ 1: サービス作成の完全性**
    - **検証対象: 要件 1.1**

  - [ ]* 2.3 サービス名一意性プロパティテスト
    - **プロパティ 4: サービス名の一意性**
    - **検証対象: 要件 1.5**

  - [ ]* 2.4 カテゴリ名一意性プロパティテスト
    - **プロパティ 10: カテゴリ名の一意性**
    - **検証対象: 要件 3.3**

- [x] 3. バックエンドAPIの基盤実装
  - [x] 3.1 Express サーバーとミドルウェアの設定
    - CORS、Helmet、JSON パーサーの設定
    - エラーハンドリングミドルウェアの実装
    - ファイルアップロード用Multer設定
    - _要件: 7.2, 2.3_

  - [x] 3.2 データベース接続とPrismaクライアント初期化
    - Prisma クライアントの設定
    - データベース初期化とシードデータ作成
    - 事前定義カテゴリ（Compute、Storage等）の作成
    - _要件: 7.3, 3.4_

- [x] 4. サービス管理API の実装
  - [x] 4.1 サービスCRUD操作の実装
    - GET /api/services（一覧取得）
    - POST /api/services（作成）
    - GET /api/services/:id（詳細取得）
    - PUT /api/services/:id（更新）
    - DELETE /api/services/:id（削除）
    - _要件: 1.1, 1.2, 1.3_

  - [ ]* 4.2 サービス更新一貫性プロパティテスト
    - **プロパティ 2: サービス更新の一貫性**
    - **検証対象: 要件 1.2**

  - [ ]* 4.3 カスケード削除完全性プロパティテスト
    - **プロパティ 3: カスケード削除の完全性**
    - **検証対象: 要件 1.3**

- [x] 5. メモ管理API の実装
  - [x] 5.1 メモCRUD操作の実装
    - GET /api/services/:id/memos（サービスのメモ一覧）
    - POST /api/services/:id/memos（メモ作成）
    - PUT /api/memos/:id（メモ更新）
    - DELETE /api/memos/:id（メモ削除）
    - _要件: 2.1, 2.2, 2.5_

  - [x] 5.2 画像アップロード機能の実装
    - POST /api/upload（画像アップロード）
    - 画像ファイル保存とサムネイル生成
    - GET /api/files/:filename（ファイル取得）
    - _要件: 2.3_

  - [ ]* 5.3 メモ作成型安全性プロパティテスト
    - **プロパティ 6: メモ作成の型安全性**
    - **検証対象: 要件 2.1, 2.2, 2.3**

  - [ ]* 5.4 メモ表示時系列順序プロパティテスト
    - **プロパティ 7: メモ表示の時系列順序**
    - **検証対象: 要件 2.4**

  - [ ]* 5.5 メモ削除クリーンアッププロパティテスト
    - **プロパティ 8: メモ削除のクリーンアップ**
    - **検証対象: 要件 2.5**

- [x] 6. カテゴリ管理API の実装
  - [x] 6.1 カテゴリCRUD操作の実装
    - GET /api/categories（カテゴリ一覧）
    - POST /api/categories（カテゴリ作成）
    - PUT /api/categories/:id（カテゴリ更新）
    - DELETE /api/categories/:id（カテゴリ削除）
    - _要件: 3.1, 3.2, 3.3_

  - [ ]* 6.2 カテゴリ-サービス関係一貫性プロパティテスト
    - **プロパティ 9: カテゴリ-サービス関係の一貫性**
    - **検証対象: 要件 3.1, 3.5**

  - [ ]* 6.3 カテゴリ別グループ化プロパティテスト
    - **プロパティ 11: カテゴリ別グループ化**
    - **検証対象: 要件 3.2**

- [x] 7. 検索・フィルタ機能の実装
  - [x] 7.1 検索API の実装
    - GET /api/search?q=:query（全文検索）
    - GET /api/services?category=:id（カテゴリフィルタ）
    - ソート機能（関連度、アルファベット順、更新日）
    - _要件: 1.4, 6.1, 6.2, 6.3_

  - [ ]* 7.2 包括的検索機能プロパティテスト
    - **プロパティ 5: 包括的検索機能**
    - **検証対象: 要件 1.4, 6.1, 6.2**

  - [ ]* 7.3 検索結果ソート一貫性プロパティテスト
    - **プロパティ 18: 検索結果ソートの一貫性**
    - **検証対象: 要件 6.3**

  - [ ]* 7.4 検索語ハイライト正確性プロパティテスト
    - **プロパティ 19: 検索語ハイライトの正確性**
    - **検証対象: 要件 6.5**

- [x] 8. 関係性管理API の実装
  - [x] 8.1 関係性CRUD操作の実装
    - GET /api/relations（関係性一覧）
    - POST /api/relations（関係性作成）
    - DELETE /api/relations/:id（関係性削除）
    - 関連サービス取得API
    - _要件: 4.1, 4.3, 4.4_

  - [ ]* 8.2 関係性ライフサイクル管理プロパティテスト
    - **プロパティ 12: 関係性のライフサイクル管理**
    - **検証対象: 要件 4.1, 4.4**

  - [ ]* 8.3 関連サービス取得正確性プロパティテスト
    - **プロパティ 13: 関連サービス取得の正確性**
    - **検証対象: 要件 4.3**

- [x] 9. 比較機能API の実装
  - [x] 9.1 比較機能の実装
    - 複数サービス比較データ生成
    - カスタム属性定義機能
    - エクスポート機能（PDF/CSV）
    - _要件: 5.1, 5.2, 5.3, 5.4, 5.5_

  - [ ]* 9.2 比較機能制限遵守プロパティテスト
    - **プロパティ 14: 比較機能の制限遵守**
    - **検証対象: 要件 5.1, 5.5**

  - [ ]* 9.3 比較データ完全性プロパティテスト
    - **プロパティ 15: 比較データの完全性**
    - **検証対象: 要件 5.2**

  - [ ]* 9.4 カスタム比較属性反映プロパティテスト
    - **プロパティ 16: カスタム比較属性の反映**
    - **検証対象: 要件 5.3**

  - [ ]* 9.5 エクスポート機能正確性プロパティテスト
    - **プロパティ 17: エクスポート機能の正確性**
    - **検証対象: 要件 5.4**

- [x] 10. チェックポイント - バックエンドテスト確認
  - すべてのテストが通ることを確認し、問題があれば質問する

- [x] 11. フロントエンド基盤の実装
  - [x] 11.1 React アプリケーションの初期設定
    - Create React App with TypeScript
    - Tailwind CSS の設定
    - React Router の設定
    - Axios の設定とAPI クライアント作成
    - _要件: 8.1, 8.2_

  - [x] 11.2 レイアウトコンポーネントの実装
    - Header コンポーネント（検索バー、ナビゲーション）
    - Sidebar コンポーネント（カテゴリフィルタ、メニュー）
    - Main レイアウトコンポーネント
    - レスポンシブデザインの実装
    - _要件: 8.1, 8.2, 8.4_

- [x] 12. サービス管理UI の実装
  - [x] 12.1 サービス一覧ページの実装
    - ServiceList コンポーネント
    - ServiceCard コンポーネント
    - ページネーション機能
    - _要件: 1.1, 3.2_

  - [x] 12.2 サービス詳細・編集ページの実装
    - ServiceDetail コンポーネント
    - サービス作成・編集フォーム
    - バリデーション機能
    - _要件: 1.1, 1.2, 1.3_

- [x] 13. メモ管理UI の実装
  - [x] 13.1 メモ表示・編集コンポーネントの実装
    - MemoEditor コンポーネント
    - テキスト、リンク、画像メモの表示
    - メモ作成・編集・削除機能
    - _要件: 2.1, 2.2, 2.4, 2.5_

  - [x] 13.2 画像アップロードコンポーネントの実装
    - ImageUpload コンポーネント
    - ドラッグ&ドロップ機能
    - プレビュー機能
    - _要件: 2.3_

- [x] 14. 検索・フィルタUI の実装
  - [x] 14.1 検索機能の実装
    - SearchBar コンポーネント
    - 検索結果表示
    - 検索語ハイライト機能
    - _要件: 6.1, 6.4, 6.5_

  - [x] 14.2 フィルタ・ソート機能の実装
    - カテゴリフィルタ
    - ソート機能（関連度、アルファベット順、更新日）
    - フィルタ状態管理
    - _要件: 6.2, 6.3_

  - [ ]* 14.3 レスポンシブレイアウト機能保持プロパティテスト
    - **プロパティ 20: レスポンシブレイアウトの機能保持**
    - **検証対象: 要件 8.4**

- [x] 15. 関係性可視化UI の実装
  - [x] 15.1 関連マップコンポーネントの実装
    - React Flow を使用した関連マップ
    - ノード・エッジの表示
    - インタラクティブ機能（クリック、ハイライト）
    - _要件: 4.2, 4.3_

  - [x] 15.2 関係性管理機能の実装
    - 関係性作成・削除UI
    - 関係タイプ選択
    - 関係詳細表示
    - _要件: 4.1, 4.4, 4.5_

- [x] 16. 比較機能UI の実装
  - [x] 16.1 比較テーブルコンポーネントの実装
    - ComparisonTable コンポーネント
    - サービス選択機能
    - 比較項目表示
    - _要件: 5.1, 5.2_

  - [x] 16.2 比較機能の拡張実装
    - カスタム属性追加機能
    - エクスポート機能UI
    - 比較制限（最大5サービス）の実装
    - _要件: 5.3, 5.4, 5.5_

- [x] 17. カテゴリ管理UI の実装
  - [x] 17.1 カテゴリ管理ページの実装
    - カテゴリ一覧表示
    - カテゴリ作成・編集・削除機能
    - カテゴリ色設定機能
    - _要件: 3.1, 3.3_

- [x] 18. 状態管理とデータフェッチングの実装
  - [x] 18.1 React Query の設定と実装
    - API クエリとミューテーションの定義
    - キャッシュ戦略の設定
    - エラーハンドリング
    - _要件: 全般_

  - [x] 18.2 カスタムフックの実装
    - useServices フック
    - useMemos フック
    - useCategories フック
    - useRelations フック
    - _要件: 全般_

- [x] 19. Docker 統合とデプロイメント設定
  - [x] 19.1 Dockerfile の作成
    - フロントエンド用 Dockerfile（multi-stage build）
    - バックエンド用 Dockerfile
    - 本番環境最適化
    - _要件: 7.1_

  - [x] 19.2 Docker Compose の完成
    - サービス間通信の設定
    - ボリュームマウント設定
    - 環境変数設定
    - ヘルスチェック設定
    - _要件: 7.2, 7.4, 7.5_

- [x] 20. 最終チェックポイント - 全体テスト確認
  - すべてのテストが通ることを確認し、問題があれば質問する